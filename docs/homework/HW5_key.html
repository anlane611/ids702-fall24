<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2001-11-24">

<title>Homework 5 – IDS 702</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">
      IDS 702
      </li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">IDS 702</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Course Materials</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">Unit 0: Bootcamp</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/unit0/unit0b.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cleaning and exploring data in R</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">Unit 1: Statistics Fundamentals</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/Unit1/IntroAndStudyDesign/Intro_ExperimentalDesign.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8.27: Introduction and Study Design</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/Unit1/IntrotoProbability/IntrotoProbability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8.29: Introduction to Probability</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/Unit1/Distributions/Distributions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9.3: Probability Distributions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/Unit1/Distributions/SamplingDistributions_CLT.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9.5: Sampling Distributions &amp; Central Limit Theorem</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/Unit1/Estimation/MLEstimation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9.10: Maximum Likelihood Estimation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/Unit1/ConfidenceIntervals/Bootstrap_CI.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9.12: Bootstrap and Confidence Intervals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/Unit1/Inference/InferenceI.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9.17: Inference I</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/Unit1/Inference/InferenceII.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9.19: Inference II: Traditional Statistical Tests</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">Unit 2: Linear Regression</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/Unit2/SLR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9.24: Simple Linear Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/Unit2/MLR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9.26: Multiple Linear Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/Unit2/CategoricalInteraction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10.1: Categorical Predictors &amp; Interaction Terms</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/Unit2/AssessingModels.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10.3: Assessment &amp; Assumptions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/Unit2/Problems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10.8: Problems that can arise</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/Unit2/ModelSelection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10.10: Model Selection</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false">
 <span class="menu-text">Unit 3: Generalized Linear Models</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/Unit3/Logistic Regression/IntrotoGLMs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10.24: Introduction to Generalized Linear Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/Unit3/Logistic Regression/LogisticEstimation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10.29: Logistic Regression Estimation &amp; Interpretation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/Unit3/Logistic Regression/LogisticMetrics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10.31: Logistic Regression Assessment</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/Unit3/Multinomial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">11.7: Multinomial Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/Unit3/Ordinal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">11.12: Ordinal Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/Unit3/Poisson.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">11.14: Poisson Regression</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reflections.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistics Reflections</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Homework</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../homework/HW1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../homework/HW2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../homework/HW3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework 3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../homework/HW4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework 4</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../homework/HW5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework 5</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Resources</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../exam/Midterm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Midterm</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Project</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project/proposal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Proposal</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project/reportandpres.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Final Report and Presentation</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#code-book" id="toc-code-book" class="nav-link active" data-scroll-target="#code-book">Code book</a></li>
  <li><a href="#key" id="toc-key" class="nav-link" data-scroll-target="#key">Key</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Homework 5</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 24, 2001</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>The exercise is based on the airline customer satisfaction dataset found here: <a href="https://www.kaggle.com/datasets/teejmahal20/airline-passenger-satisfaction" class="uri">https://www.kaggle.com/datasets/teejmahal20/airline-passenger-satisfaction</a>.</p>
<section id="code-book" class="level2">
<h2 class="anchored" data-anchor-id="code-book">Code book</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 51%">
<col style="width: 48%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Age</td>
<td style="text-align: left;">Passenger age</td>
</tr>
<tr class="even">
<td style="text-align: left;">Gender</td>
<td style="text-align: left;">Passenger gender</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Type.of.Travel</td>
<td style="text-align: left;">Purpose of the passenger’s flight (personal, business)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Class</td>
<td style="text-align: left;">Travel class in the plane (business, eco, eco plus)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Customer.Type</td>
<td style="text-align: left;">Loyal or disloyal customer</td>
</tr>
<tr class="even">
<td style="text-align: left;">Flight.Distance</td>
<td style="text-align: left;">Flight distance</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Inflight.wifi.service</td>
<td style="text-align: left;">Satisfaction level of inflight wifi service (0: Not applicable; 1-5 where 5 is completely satisfied)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Ease.of.Online.booking</td>
<td style="text-align: left;">Satisfaction level of online booking</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Inflight.service</td>
<td style="text-align: left;">Satisfaction level of inflight service</td>
</tr>
<tr class="even">
<td style="text-align: left;">Online.boarding</td>
<td style="text-align: left;">Satisfaction level of online boarding</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Inflight.entertainment</td>
<td style="text-align: left;">Satisfaction level of inflight entertainment</td>
</tr>
<tr class="even">
<td style="text-align: left;">Food.and.drink</td>
<td style="text-align: left;">Satisfaction level of food and drink</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Seat.comfort</td>
<td style="text-align: left;">Satisfaction level of seat comfort</td>
</tr>
<tr class="even">
<td style="text-align: left;">On.board.service</td>
<td style="text-align: left;">Satisfaction level of On-board service</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Leg.room.service</td>
<td style="text-align: left;">Satisfaction level of leg room</td>
</tr>
<tr class="even">
<td style="text-align: left;">Departure.Arrival.time.convenient</td>
<td style="text-align: left;">Satisfaction level of departure/arrival time convenience</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Baggage.handling</td>
<td style="text-align: left;">Satisfaction level of baggage handling</td>
</tr>
<tr class="even">
<td style="text-align: left;">Gate.location</td>
<td style="text-align: left;">Satisfaction level of gate location</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cleanliness</td>
<td style="text-align: left;">Satisfaction level of cleanliness</td>
</tr>
<tr class="even">
<td style="text-align: left;">Checkin.service</td>
<td style="text-align: left;">Satisfaction level of check-in service</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Departure.Delay.in.Minutes</td>
<td style="text-align: left;">Departure delay in minutes</td>
</tr>
<tr class="even">
<td style="text-align: left;">Arrival.Delay.in.Minutes</td>
<td style="text-align: left;">Arrival delay in minutes</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Satisfaction</td>
<td style="text-align: left;">Airline satisfaction level (satisfied, neutral, dissatisfied)</td>
</tr>
</tbody>
</table>
<p>An airline called LaneAir is seeking a data scientist consultant to better understand drivers of customer satisfaction. The airline distributed a survey to customers who have flown with LaneAir in the last six months. Customers rated their overall satisfaction as dissatisfied, neutral, or satisfied. Then they rated their satisfaction with various aspects of the flight. The airline also has information on the passengers’ flight details, including flight distance and departure delay. LaneAir would like to know which services are worth investing in to improve customer satisfaction. However, they would like the data science consultant to keep in mind that some services are more difficult to improve than others. LaneAir is considering the following investments, ranked from <strong>most difficult</strong> to <strong>least difficult</strong> to implement:</p>
<ul>
<li>Newer, larger seats to improve seat comfort and leg room. This will reduce the number of seats per plane, which is LaneAir’s last choice</li>
<li>Newer plane models that improve reliability to minimize delays</li>
<li>Hire more flight attendants or other staff to improve services including inflight service, cleanliness, or onboarding.</li>
<li>Technology investment to improve wifi and entertainment service</li>
<li>Marketing or promotion initiatives to improve customer loyalty or appeal to different customer types (e.g., different age demographic, business/personal travelers)</li>
</ul>
<p>You will complete this assignment in two parts. The first part of the assignment will be a 3-4 page report that is suitable for <strong>other data scientists.</strong> Here, you will present details of your model to justify the conclusions you presented to the client. This section should present technical details that someone with a data science background can understand. This report must include the following, though you may wish to provide additional details relevant to the analysis:</p>
<ul>
<li>Data overview and analysis plan: You should present details of the data that were not included in part 1, for example an appropriate distributional assumption for the outcome variable. Then, present the type of model you used for the analysis. Which type of generalized linear model is best suited for this problem? What is the link function?</li>
<li>Model results: Present a table of model results including odds ratios, confidence intervals, and p-values. Interpret the results that you think are most compelling.</li>
<li>Model assessment: Present the confusion matrix and explain your conclusion for the model’s predictive accuracy. Additionally, the model you should use for this analysis relies on a key assumption that is unique to this model. Using a different, more “precise” model, compare predictions using the predictors <code>Gender</code> and <code>Customer type</code>. Show the confusion matrix for the more precise model and compare the accuracy.</li>
<li>Conclusion: What do you conclude about the validity of this analysis?</li>
</ul>
<p>Next, you will create a 2-page report <strong>for the client.</strong> This report should be understood by LaneAir executives with very little understanding of statistics. This report should include the following:</p>
<ul>
<li>Introduction: Provide an overview of the dataset and the goals of the analysis. Keep in mind that the LaneAir team is familiar with the questions on the survey, but not the results. So you should include, for example, basic summary statistics to show the team the distribution of customers in the different satisfaction categories.</li>
<li>Methods: Explain the model you used to analyze the data without getting into technical details. Why did you decide to use that model for this dataset and how does it answer the airline’s question?</li>
<li>Results: What are the key results of the analysis as they relate to the airline’s question? Present at least one figure that effectively communicates a key takeaway of the analysis.</li>
<li>Conclusion: Keeping in mind LaneAir’s cost considerations outlined above, what are your recommendations for how they can balance impact with cost? Do you have any recommendations that the airline has not considered? Finally, are there any limitations that the client should be aware of? For example, could certain customers be more likely to respond to the survey than others?</li>
</ul>
<div style="page-break-after: always;"></div>
</section>
<section id="key" class="level2">
<h2 class="anchored" data-anchor-id="key">Key</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>air.sub <span class="ot">&lt;-</span> airline[,<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>air.sub<span class="sc">$</span>Satisfaction <span class="ot">&lt;-</span> <span class="fu">factor</span>(air.sub<span class="sc">$</span>Satisfaction)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>airmod <span class="ot">&lt;-</span> <span class="fu">polr</span>(Satisfaction<span class="sc">~</span>.,<span class="at">data =</span> air.sub,<span class="at">Hess=</span><span class="cn">TRUE</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(airmod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
polr(formula = Satisfaction ~ ., data = air.sub, Hess = TRUE)

Coefficients:
                                       Value Std. Error   t value
GenderMale                        -5.763e-03  7.438e-02  -0.07748
Customer.TypeLoyal Customer        1.657e+00  1.136e-01  14.58061
Age                               -5.128e-03  2.423e-03  -2.11638
Type.of.TravelPersonal Travel     -1.990e+00  1.091e-01 -18.23193
ClassEco                          -3.530e-01  8.774e-02  -4.02312
ClassEco Plus                     -6.286e-01  1.394e-01  -4.50913
Flight.Distance                    1.666e-05  5.063e-05   0.32902
Inflight.wifi.service              3.149e-01  4.639e-02   6.78853
Departure.Arrival.time.convenient -4.461e-02  2.928e-02  -1.52341
Ease.of.Online.booking            -2.914e-01  4.471e-02  -6.51819
Gate.location                     -8.317e-03  3.316e-02  -0.25079
Food.and.drink                    -2.274e-02  4.215e-02  -0.53939
Online.boarding                    4.135e-01  3.898e-02  10.60664
Seat.comfort                       5.510e-02  4.213e-02   1.30781
Inflight.entertainment             5.434e-02  5.242e-02   1.03671
On.board.service                   1.529e-01  3.603e-02   4.24400
Leg.room.service                   1.646e-01  3.023e-02   5.44319
Baggage.handling                   7.587e-02  4.173e-02   1.81797
Checkin.service                    1.901e-01  3.146e-02   6.04382
Inflight.service                   1.249e-01  4.203e-02   2.97131
Cleanliness                        1.113e-01  4.872e-02   2.28536
Departure.Delay.in.Minutes         4.690e-03  3.659e-03   1.28196
Arrival.Delay.in.Minutes          -7.395e-03  3.629e-03  -2.03787

Intercepts:
                     Value    Std. Error t value 
dissatisfied|neutral   3.0334   0.0466    65.0710
neutral|satisfied      4.8350   0.0711    67.9927

Residual Deviance: 5466.347 
AIC: 5516.347 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>pvals <span class="ot">&lt;-</span> <span class="fu">pnorm</span>(<span class="sc">-</span><span class="fu">abs</span>(<span class="fu">summary</span>(airmod)<span class="sc">$</span>coef[,<span class="st">"t value"</span>]))<span class="sc">*</span><span class="dv">2</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(<span class="at">OR=</span><span class="fu">exp</span>(<span class="fu">summary</span>(airmod)<span class="sc">$</span>coefficients[,<span class="dv">1</span>]),<span class="fu">exp</span>(<span class="fu">confint</span>(airmod)),pvals)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in cbind(OR = exp(summary(airmod)$coefficients[, 1]),
exp(confint(airmod)), : number of rows of result is not a multiple of vector
length (arg 1)</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                                         OR     2.5 %    97.5 %        pvals
GenderMale                        0.9942538 0.8587915 1.1511279 9.382416e-01
Customer.TypeLoyal Customer       5.2420774 4.1691637 6.6018506 3.731430e-48
Age                               0.9948851 0.9899747 0.9998096 3.431287e-02
Type.of.TravelPersonal Travel     0.1367068 0.1094975 0.1702741 2.879582e-74
ClassEco                          0.7025717 0.5751105 0.8584993 5.743325e-05
ClassEco Plus                     0.5333282 0.3964524 0.7171900 6.509267e-06
Flight.Distance                   1.0000167 0.9999240 1.0001096 7.421430e-01
Inflight.wifi.service             1.3701305 1.2512877 1.5011290 1.132780e-11
Departure.Arrival.time.convenient 0.9563695 0.9028653 1.0130119 1.276568e-01
Ease.of.Online.booking            0.7471945 0.6841341 0.8155055 7.116070e-11
Gate.location                     0.9917172 0.9269949 1.0610184 8.019784e-01
Food.and.drink                    0.9775210 0.8973521 1.0643831 5.896156e-01
Online.boarding                   1.5120726 1.4006852 1.6333727 2.775401e-26
Seat.comfort                      1.0566423 0.9722759 1.1481540 1.909387e-01
Inflight.entertainment            1.0558430 0.9491974 1.1744661 2.998712e-01
On.board.service                  1.1652347 1.0849689 1.2515506 2.195748e-05
Leg.room.service                  1.1788904 1.1103566 1.2517197 5.233557e-08
Baggage.handling                  1.0788194 0.9924243 1.1727858 6.906942e-02
Checkin.service                   1.2094025 1.1359155 1.2879140 1.505052e-09
Inflight.service                  1.1330021 1.0410701 1.2330984 2.965359e-03
Cleanliness                       1.1177737 1.0154006 1.2302589 2.229199e-02
Departure.Delay.in.Minutes        1.0047014 0.9975379 1.0119606 1.998581e-01
Arrival.Delay.in.Minutes          0.9926320 0.9855630 0.9997021 4.156299e-02</code></pre>
</div>
</div>
<p>Students should use the ordinal regression model for this problem. Students can make different arguments based on the proposed investments from the airline. Looking at the t-statistics, the biggest drivers of customer satisfaction are type of travel, type of customer, online boarding, online booking, wifi service, and inflight service. A marketing/promotion initiative to gain more loyal customers strikes a balance between client preference and model output. But students may have different answers that are reasonable. Some students may exclude variables because the airline cannot intervene (e.g., gate location). Model selection is not necessary here, particularly with the large sample size.</p>
<p>Students should check the <strong>proportional odds assumption</strong> by comparing predictions from the proportional odds model and the multinomial logistic model. They should create a new dataset that includes different values for <code>gender</code> and <code>customer type</code>, holding all other variables to a single value. Exact implementation may vary here.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">confusionMatrix</span>(<span class="fu">predict</span>(airmod),air.sub<span class="sc">$</span>Satisfaction)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

              Reference
Prediction     dissatisfied neutral satisfied
  dissatisfied          502     511        76
  neutral               300     277       114
  satisfied             186     144      1368

Overall Statistics
                                          
               Accuracy : 0.6173          
                 95% CI : (0.6009, 0.6335)
    No Information Rate : 0.448           
    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
                                          
                  Kappa : 0.4012          
                                          
 Mcnemar's Test P-Value : &lt; 2.2e-16       

Statistics by Class:

                     Class: dissatisfied Class: neutral Class: satisfied
Sensitivity                       0.5081        0.29721           0.8780
Specificity                       0.7643        0.83739           0.8281
Pos Pred Value                    0.4610        0.40087           0.8057
Neg Pred Value                    0.7966        0.76498           0.8933
Prevalence                        0.2841        0.26797           0.4480
Detection Rate                    0.1443        0.07964           0.3933
Detection Prevalence              0.3131        0.19868           0.4882
Balanced Accuracy                 0.6362        0.56730           0.8531</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>multmod <span class="ot">&lt;-</span> <span class="fu">multinom</span>(Satisfaction<span class="sc">~</span>.,<span class="at">data=</span>air.sub)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># weights:  75 (48 variable)
initial  value 3820.973540 
iter  10 value 3188.373372
iter  20 value 2850.280130
iter  30 value 2696.830475
iter  40 value 2532.514648
iter  50 value 2471.655249
final  value 2455.334729 
converged</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>newdata <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Gender=</span><span class="fu">c</span>(<span class="st">"Female"</span>,<span class="st">"Male"</span>,<span class="st">"Male"</span>,<span class="st">"Female"</span>),</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Customer.Type=</span><span class="fu">c</span>(<span class="st">"Loyal Customer"</span>,<span class="st">"Loyal Customer"</span>,<span class="st">"disloyal Customer"</span>,<span class="st">"disloyal Customer"</span>),</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Age=</span><span class="fu">mean</span>(air.sub<span class="sc">$</span>Age),</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Type.of.Travel=</span><span class="fu">c</span>(<span class="st">"Personal Travel"</span>,<span class="st">"Personal Travel"</span>,<span class="st">"Personal Travel"</span>,<span class="st">"Personal Travel"</span>),</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Class=</span><span class="fu">c</span>(<span class="st">"Eco"</span>,<span class="st">"Eco"</span>,<span class="st">"Eco"</span>,<span class="st">"Eco"</span>),</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Flight.Distance=</span><span class="fu">mean</span>(air.sub<span class="sc">$</span>Flight.Distance),</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Inflight.wifi.service=</span><span class="fu">mean</span>(air.sub<span class="sc">$</span>Inflight.wifi.service),</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Departure.Arrival.time.convenient=</span><span class="fu">mean</span>(air.sub<span class="sc">$</span>Departure.Arrival.time.convenient),</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Ease.of.Online.booking=</span><span class="fu">mean</span>(air.sub<span class="sc">$</span>Ease.of.Online.booking),</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Gate.location=</span><span class="fu">mean</span>(air.sub<span class="sc">$</span>Gate.location),</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Food.and.drink=</span><span class="fu">mean</span>(air.sub<span class="sc">$</span>Food.and.drink),</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Online.boarding=</span><span class="fu">mean</span>(air.sub<span class="sc">$</span>Online.boarding),</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Seat.comfort=</span><span class="fu">mean</span>(air.sub<span class="sc">$</span>Seat.comfort),</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Inflight.entertainment=</span><span class="fu">mean</span>(air.sub<span class="sc">$</span>Inflight.entertainment),</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>                      <span class="at">On.board.service=</span><span class="fu">mean</span>(air.sub<span class="sc">$</span>Inflight.entertainment),</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Leg.room.service=</span><span class="fu">mean</span>(air.sub<span class="sc">$</span>Leg.room.service),</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Baggage.handling=</span><span class="fu">mean</span>(air.sub<span class="sc">$</span>Baggage.handling),</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Checkin.service=</span><span class="fu">mean</span>(air.sub<span class="sc">$</span>Baggage.handling),</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Inflight.service=</span><span class="fu">mean</span>(air.sub<span class="sc">$</span>Inflight.service),</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Cleanliness=</span><span class="fu">mean</span>(air.sub<span class="sc">$</span>Cleanliness),</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Departure.Delay.in.Minutes=</span><span class="fu">mean</span>(air.sub<span class="sc">$</span>Departure.Delay.in.Minutes),</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Arrival.Delay.in.Minutes=</span><span class="fu">mean</span>(air.sub<span class="sc">$</span>Arrival.Delay.in.Minutes))</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(airmod,newdata,<span class="at">type=</span><span class="st">"probs"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  dissatisfied   neutral  satisfied
1    0.3877775 0.4055221 0.20670039
2    0.3891465 0.4050964 0.20575703
3    0.7695579 0.1833499 0.04709218
4    0.7685344 0.1841142 0.04735146</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(multmod,newdata,<span class="at">type=</span><span class="st">"probs"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  dissatisfied   neutral  satisfied
1    0.4627670 0.4446957 0.09253727
2    0.4535798 0.4629508 0.08346943
3    0.5190939 0.4701031 0.01080305
4    0.5332606 0.4546801 0.01205926</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">confusionMatrix</span>(<span class="fu">predict</span>(multmod),air.sub<span class="sc">$</span>Satisfaction)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

              Reference
Prediction     dissatisfied neutral satisfied
  dissatisfied          464     423       116
  neutral               341     368        61
  satisfied             183     141      1381

Overall Statistics
                                        
               Accuracy : 0.6363        
                 95% CI : (0.62, 0.6523)
    No Information Rate : 0.448         
    P-Value [Acc &gt; NIR] : &lt; 2.2e-16     
                                        
                  Kappa : 0.4309        
                                        
 Mcnemar's Test P-Value : 5.377e-12     

Statistics by Class:

                     Class: dissatisfied Class: neutral Class: satisfied
Sensitivity                       0.4696         0.3948           0.8864
Specificity                       0.7835         0.8421           0.8313
Pos Pred Value                    0.4626         0.4779           0.8100
Neg Pred Value                    0.7883         0.7917           0.9002
Prevalence                        0.2841         0.2680           0.4480
Detection Rate                    0.1334         0.1058           0.3971
Detection Prevalence              0.2884         0.2214           0.4902
Balanced Accuracy                 0.6266         0.6185           0.8588</code></pre>
</div>
</div>
<p>Answers may vary, but it seems we do have evidence that the proportional odds assumption may be violated based on the predicted probabilities. We see a slight improvement in predictive accuracy using the multinomial logistic model over the ordinal model, but probably not enough to sacrifice the better interpretability of the ordinal model. In both models, the sensitivity is pretty low for the dissatisfied and neutral levels.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>